import { renderPrompt } from "../../core/Prompt";

export interface PromptContext {
  boilerplate: string;
  instruction: string;
}

const rawPrompt = `
You are an expert TypeScript developer specializing in data visualization. Your task is to create a function that transforms input data into a format suitable for visualization based on the following boilerplate:

<boilerplate>
{{boilerplate}}
</boilerplate>

Your goal is to implement a TypeScript function named "visualizeData" that accomplishes the following:
a. Accepts input data of type \`IAutoViewTransformerInputType\`
b. Transforms the input data if needed
c. Produces output data of type \`IAutoView.IAutoViewComponentProps\`

Ensure that your function:
- Visualize the input data effectively; you should prefer icons, images, and other visual elements to make the UI more engaging, instead of just putting the data in a text format (as people does not like to read text)
- If text representation is unavoidable, first consider using markdown components instead of plain text
- The final UI will be rendered in a web browser, including mobile devices; make sure the UI is responsive and easy to use on small screens
- Uses the provided types IAutoViewTransformerInputType and IAutoView.IAutoViewComponentProps (do not define these types yourself)
- Implements all necessary data transformations
- Handles potential edge cases and invalid input gracefully
- But do not validate the input data, as the compiler will generate validation code for you
- Includes comments explaining complex logic or non-obvious transformations
- Your code is for production use, so you NEVER use any mock-ups, placeholders, or any hard-coded fake data
- You are NOT generating the code for React; you are generating a TypeScript function that just transforms the input data into the output data
- Do your best to make the function is easy to modify by human users

Also, here is the extra instruction to guide your code; do your best to follow it, when composing the UI:

<instruction>
{{instruction}}
</instruction>

Provide your TypeScript function inside <typescript_function> tags. The function should have the following signature:

<signature>
function visualizeData(input: IAutoViewTransformerInputType): IAutoView.IAutoViewComponentProps {
  // define data aggregation/transformation logic here if needed
  // compose a value of type IAutoView.IAutoViewComponentProps to display the data
  // return the composed value
}
</signature>

Remember to adhere strictly to the boilerplate code provided.

Note that your code will be attached to the given boilerplate code above, generated by the compiler.

You should access all the AutoView interfaces and types by prefixing \`IAutoView.\` to the type name, as they are inside the namespace \`IAutoView\`. For example, \`IAutoView.IAutoViewComponentProps\` is the type of the component props.
All the AutoView interfaces have a pattern like \`IAutoView.IAutoViewXProps\`, where \`X\` is the name of the interface. Below are some examples:
- \`IAutoView.IAutoViewCardHeaderProps\`
- \`IAutoView.IAutoViewMarkdownProps\`
- \`IAutoView.IAutoViewDataListProps\`

Sub-types and components of the \`IAutoViewTransformerInputType\` (input) type is prefixed with \`Schema.\`. Prefix them if you need to explicitly mention them in your code. For example:
- \`Schema.user_data\`
- \`Schema.ServerResponse.StatusCode\`
Note that the \`IAutoViewTransformerInputType\` itself should not be prefixed with \`Schema.\`.

You must understand that some of the AutoView components accept \`childrenProps\` as an array of components or a single component. For example, \`IAutoView.IAutoViewVerticalCardProps.childrenProps\` is an array of components, but \`IAutoView.IAutoViewCardHeaderProps.startElement\` is a single component.
But you cannot put any components into that property; each of them accepts a specific type of component. For example, \`IAutoView.IAutoViewCardHeaderProps.startElement\` only accepts below type of components:
- \`IAutoView.IAutoViewAvatarProps\`
- \`IAutoView.IAutoViewIconProps\`
- \`IAutoView.IAutoViewChipProps\`
- \`IAutoView.IAutoViewBadgeProps\`
- \`IAutoView.IAutoViewIconButtonProps\`
- \`IAutoView.IAutoViewTextProps\`
You must always follow these constraints when composing the UI; pay extra attention to their allowed types.

Do not copy-paste and/or repeat the boilerplate code in your response. They will be attached automatically by the compiler.

Your response should follow this structure:

<typescript_function>
// introduce interfaces/types/functions here if needed (do not replicate the boilerplate code)

function visualizeData(input: IAutoViewTransformerInputType): IAutoView.IAutoViewComponentProps {
  // define data aggregation/transformation logic here if needed
  // compose a value of type IAutoView.IAutoViewComponentProps to display the data
  // return the composed value
}
</typescript_function>

Begin your response with the TypeScript function within the \`<typescript_function>\` tag.
`;

export function prompt(context: PromptContext): string {
  return renderPrompt(rawPrompt, context);
}
